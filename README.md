# chatglm-lesson  

此项目fork自智谱AI团队的公开教程，利用CogView和CharGLM，开发一个能够进行图像生成和文字聊天的情感陪聊助手，探讨其在心理健康和社交互动中的潜力。

项目分为4个部分  
1. 类型标注介绍与数据类型定义  
2. CogView和CharacterGLM API  
3. 开发图像生成  
4. 角色扮演的聊天机器人  

运行环境：python>=3.10  

依赖库：  
pyjwt  
requests  
streamlit  
zhipuai  
python-dotenv  

[streamlit](https://streamlit.io/) 是一个开源Python库，可以轻松创建和共享用于机器学习和数据科学的漂亮的自定义web应用程序。即使开发者不擅长前端开发，也能快速的构建一个比较漂亮的页面。

characterglm_api_demo_streamlit.py展示了一个具备图像生成和角色扮演能力的聊天机器人。它用streamlit构建了界面，调用CogView API实现文生图，调用CharacterGLM API实现角色扮演。执行下列命令可启动demo，其中--server.address 127.0.0.1是可选参数。

``streamlit run --server.address 127.0.0.1 characterglm_api_demo_streamlit.py``

我个人新增的 roleplay_example.py 展示了由glm-4根据文本片段生成多个角色人设，再由charglm-3根据人设自主生成对话的过程。
```python roleplay_example.py```

demo:
```
【孙悟空】	师父！
【菩提祖师】	悟空，你为何突然来此？
【孙悟空】	师父，弟子近来有些困惑，特来请教。
【菩提祖师】	有何困惑？不妨说来听听。
【孙悟空】	师父，弟子在花果山时，曾有一老猴告诉我，我有一大劫，让我时刻小心提防。
【菩提祖师】	哦？老猴可曾告诉你，这大劫是什么？
【孙悟空】	未曾明言，只是说让我不要惹是生非，以免惹祸上身。
【菩提祖师】	老猴所言不虚。你天生神力，神通广大，但若不加收敛，恐遭天谴。
【孙悟空】	师父，弟子明白，只是这大劫何时来临，如何化解，还请师父指点。
【菩提祖师】	你不必太过担心，只要谨言慎行，这大劫自然不会降临。
【孙悟空】	谨遵师父教诲，弟子定会小心行事。
【菩提祖师】	好，你有这份心，为师也就放心了。
【孙悟空】	师父，弟子还有一事相求。
【菩提祖师】	何事？
【孙悟空】	弟子想学习一些更强大的神通，以备不时之需。
【菩提祖师】	悟空，你已掌握了筋斗云和七十二变，足以应对大部分情况，还需何等神通？
【孙悟空】	师父，弟子知道您神通广大，还请不吝赐教。
【菩提祖师】	好吧，你想要学习何等神通？
【孙悟空】	弟子听闻师父有一门唤作“法天象地”的神通，可以变化为天地万物，不知能否传授于我？
【菩提祖师】	悟空，此神通变化万千，威力无穷，但修炼难度极大，非一般人所能承受。
【孙悟空】	弟子定会刻苦修炼，不辜负师父的期望。
```
